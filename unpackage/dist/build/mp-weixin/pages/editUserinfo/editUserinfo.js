(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/editUserinfo/editUserinfo"],{"427c":function(t,e,n){"use strict";n.r(e);var i=n("be4b"),a=n("8777");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("52b7");var r=n("2877"),u=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=u.exports},"52b7":function(t,e,n){"use strict";var i=n("6f6a"),a=n.n(i);a.a},"6f6a":function(t,e,n){},8777:function(t,e,n){"use strict";n.r(e);var i=n("d68e"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},be4b:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},d68e:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("32ae"),a=n("9f82"),o=function(){return Promise.all([n.e("common/vendor"),n.e("components/yq-avatar/yq-avatar")]).then(n.bind(null,"39e2"))},r={data:function(){return{edit:!1,avatarUrl:"",userinfo:{}}},components:{avatar:o},onLoad:function(){this.userinfo=t.getStorageSync("userinfo"),console.log(this.userinfo.picUrl),this.avatarUrl=a.fileUrl+this.userinfo.picUrl},methods:{doBefore:function(){},doUpload:function(t){this.avatarUrl=t.path,this.uploadImg()},clk:function(){this.edit&&this.$refs.avatar.fChooseImg("",{selWidth:"350upx",selHeight:"350upx",expWidth:"260upx",expHeight:"260upx",inner:"true"})},handle:function(){var e=this;this.edit?(0,i.postajax)(i.api.updatePeronal,this.userinfo).then(function(n){0==n.code&&(t.showToast({title:"修改个人信息成功"}),e.edit=!e.edit,t.setStorageSync("userinfo",e.userinfo))}):this.edit=!this.edit},uploadImg:function(){var e=this;this.edit&&wx.getFileSystemManager().readFile({filePath:this.avatarUrl,encoding:"base64",success:function(n){(0,i.postajax)(i.api.uploadImg,{file:"data:image/png;base64,"+n.data,fileName:(new Date).getTime()+"avatar.png"}).then(function(n){0==n.code&&(t.showToast({title:"修改个人头像成功"}),e.edit=!e.edit,e.userinfo["picUrl"]=n.picUrl,t.setStorageSync("userinfo",e.userinfo))})},fail:function(t){console.log(t)}})}}};e.default=r}).call(this,n("543d")["default"])}},[["ff73","common/runtime","common/vendor"]]]);